Step 1: ビルド確認

- pnpm buildを実行してエラー確認
- 型エラーを全て修正
- ビルド成功確認

Step 2: コード削除

- 古いfunction-based実装削除（enhanceERASTNode等）
- 未使用import削除
- コメントアウトコード削除

Step 3: テスト作成/修正

- 壊れた既存テスト修正
- Enhanced AST用テスト作成（全6種類）
- asCode()ラウンドトリップテスト作成

Step 4: リファクタリング

- 重複コード抽出・ユーティリティ関数化

Step 5: 最終確認

- 全テスト実行&成功確認
- 最終ビルド確認
- ドキュメント最終チェック